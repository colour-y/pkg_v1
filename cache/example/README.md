# Map 缓存使用说明

## 设计理念

Map 缓存是一个基于内存的键值对存储系统，具有以下特点：

1. **简单高效**：使用 Go 语言内置的 map 数据结构，提供快速的读写操作
2. **线程安全**：通过互斥锁保证并发安全
3. **过期机制**：支持设置缓存项的过期时间
4. **类型灵活**：可以存储任意类型的数据

## 核心功能

1. **基本操作**
   - Set：设置缓存项，支持过期时间
   - Get：获取缓存项
   - Delete：删除缓存项
   - Clear：清空所有缓存
   - Has：检查键是否存在
   - Size：获取缓存大小

2. **并发安全**
   - 所有操作都是线程安全的
   - 使用互斥锁保护共享资源

3. **过期处理**
   - 支持设置过期时间
   - 自动清理过期数据

## 使用示例

### 基本使用

```go
// 创建缓存实例
cache := NewMapCache()

// 设置缓存
cache.Set("key", "value", 5*time.Minute)

// 获取缓存
if value, exists := cache.Get("key"); exists {
    // 使用 value
}
```

### 存储结构体

```go
type User struct {
    ID   int
    Name string
    Age  int
}

// 存储结构体
user := User{ID: 1, Name: "张三", Age: 25}
cache.Set("user1", user, 30*time.Minute)

// 获取并类型断言
if value, exists := cache.Get("user1"); exists {
    if user, ok := value.(User); ok {
        // 使用 user
    }
}
```

## 最佳实践

1. **合理设置过期时间**
   - 根据数据更新频率设置合适的过期时间
   - 避免设置过长的过期时间，防止内存占用过大

2. **类型安全**
   - 获取数据时注意进行类型断言
   - 使用类型断言时处理可能的类型转换失败

3. **内存管理**
   - 定期清理不需要的缓存
   - 监控缓存大小，避免内存溢出

4. **错误处理**
   - 检查 Get 操作的返回值
   - 处理类型断言可能的失败情况

## 注意事项

1. 缓存数据存储在内存中，程序重启后数据会丢失
2. 不适合存储大量数据，主要用于缓存热点数据
3. 过期清理是惰性的，在获取数据时才会检查过期
4. 并发操作时要注意性能影响 